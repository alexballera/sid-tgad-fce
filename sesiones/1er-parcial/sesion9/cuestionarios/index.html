<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Exámenes de práctica sobre el Modelo Relacional de Bases de Datos - Sesión 9 FCE">
    <meta name="keywords" content="modelo relacional, bases de datos, SQL, clave primaria, clave foránea, FCE, Codd">
    <meta name="author" content="Fundamentos de Datos FCE - UBA">
    <title>Exámenes de Práctica - Modelo Relacional - Sesión 9 FCE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #4f46e5 0%, #a78bfa 100%);
        }
        .quiz-button {
            transition: background-color 0.2s, transform 0.1s;
        }
        .quiz-button:hover {
            background-color: #4338ca;
            transform: translateY(-2px);
        }
        .quiz-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .answer-button {
            width: 100%;
            background-color: #e5e7eb;
            color: #1f2937;
            text-align: left;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 500;
            transition: background-color 0.2s, transform 0.1s;
        }
        .answer-button:hover:not(:disabled) {
            background-color: #d1d5db;
        }
        .answer-button.correct {
            background-color: #10b981;
            color: white;
            animation: pulse-correct 0.8s;
        }
        .answer-button.incorrect {
            background-color: #ef4444;
            color: white;
            animation: shake 0.5s;
        }
        .explanation {
            background-color: #f0f4f8;
            border-left: 4px solid #4f46e5;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.5rem;
        }
        @keyframes pulse-correct {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div id="app" class="container bg-white p-8 rounded-2xl shadow-xl w-full">
        <!-- Pantalla de selección de cuestionarios -->
        <div id="quiz-selection-screen">
            <h1 class="text-3xl font-bold text-center mb-4 text-indigo-700">Selecciona un Examen de Práctica - Sesión 9</h1>
            <p class="text-center text-gray-600 mb-8">Cada examen contiene 15 preguntas aleatorias sobre el modelo relacional, sus conceptos y restricciones. ¡Mucha suerte!</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
                <button onclick="startQuiz(0)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 1</button>
                <button onclick="startQuiz(1)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 2</button>
                <button onclick="startQuiz(2)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 3</button>
                <button onclick="startQuiz(3)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 4</button>
                <button onclick="startQuiz(4)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 5</button>
                <button onclick="startQuiz(5)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 6</button>
                <button onclick="startQuiz(6)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 7</button>
                <button onclick="startQuiz(7)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 8</button>
                <button onclick="startQuiz(8)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 9</button>
                <button onclick="startQuiz(9)" class="card p-6 text-center gradient-bg text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none">Examen de Práctica 10</button>
            </div>
        </div>

        <!-- Pantalla del cuestionario -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <div class="text-lg font-semibold text-gray-700">Pregunta <span id="current-question-number"></span> de 15</div>
                <div class="text-lg font-semibold text-gray-700">Puntaje: <span id="score">0</span></div>
            </div>
            <div class="card p-6 mb-6">
                <h2 id="question" class="text-xl font-semibold text-gray-900 mb-6"></h2>
                <div id="options-container" class="space-y-4"></div>
            </div>
            <div id="feedback-message" class="text-center p-4 my-4 rounded-lg font-semibold hidden"></div>
            <button id="next-button" class="quiz-button w-full py-4 mt-6 gradient-bg text-white font-bold text-lg rounded-lg shadow-md focus:outline-none" onclick="nextQuestion()" disabled>Siguiente</button>
        </div>

        <!-- Pantalla de resultados -->
        <div id="results-screen" class="hidden text-center">
            <h1 class="text-3xl font-bold text-indigo-700 mb-4">¡Examen Completo!</h1>
            <p class="text-xl text-gray-700 mb-6">Tu puntaje final es:</p>
            <div class="text-5xl font-extrabold text-white gradient-bg p-8 rounded-full inline-block shadow-lg mb-8">
                <span id="final-score"></span>
                <span class="block text-2xl font-normal mt-2">de 15</span>
            </div>
            <p class="text-lg text-gray-600 mb-4">¡Sigue practicando para dominar el modelo relacional!</p>
            <button class="quiz-button py-4 px-8 mt-4 bg-indigo-600 text-white font-bold text-lg rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none" onclick="restartQuiz()">Volver a la selección</button>
        </div>
    </div>

    <script>
        // BANCO DE PREGUNTAS INTEGRADO - SESIÓN 9: MODELO RELACIONAL DE BASES DE DATOS
        const allQuestions = [
            {
                question: "¿Quién propuso originalmente el modelo relacional para las bases de datos?",
                options: [
                    "Bill Gates",
                    "Charles Babbage",
                    "E. F. Codd",
                    "Alan Turing"
                ],
                answer: 2,
                explanation: "El modelo relacional fue propuesto originalmente por E. F. Codd de IBM en 1970, sentando las bases para la mayoría de los sistemas de bases de datos modernos."
            },
            {
                question: "En el modelo relacional, ¿a qué corresponde el término 'relación'?",
                options: [
                    "A una fila o registro.",
                    "A una tabla bidimensional que contiene los datos.",
                    "A una columna o campo.",
                    "A la conexión entre dos bases de datos."
                ],
                answer: 1,
                explanation: "En la terminología formal del modelo relacional, una 'relación' es una tabla. Informalmente, se le llama tabla."
            },
            {
                question: "¿Cómo se denomina a una fila en una relación (tabla)?",
                options: [
                    "Atributo",
                    "Tupla",
                    "Dominio",
                    "Clave"
                ],
                answer: 1,
                explanation: "Cada fila de una tabla se denomina formalmente 'tupla'. Representa un registro o un conjunto de datos relacionados sobre una entidad específica."
            },
            {
                question: "Un 'atributo' en el modelo relacional es el nombre de:",
                options: [
                    "Una tabla.",
                    "Una base de datos completa.",
                    "Una columna de una tabla.",
                    "Una restricción de integridad."
                ],
                answer: 2,
                explanation: "Un 'atributo' es el nombre de una columna en una tabla (relación). Define una propiedad o característica de la entidad que la tabla representa."
            },
            {
                question: "¿Qué es el 'dominio' de un atributo?",
                options: [
                    "El nombre del atributo.",
                    "El conjunto de valores permitidos para ese atributo.",
                    "El valor por defecto del atributo.",
                    "La clave primaria de la tabla."
                ],
                answer: 1,
                explanation: "El dominio de un atributo es el conjunto de todos los valores atómicos (indivisibles) que puede tomar. Por ejemplo, el dominio de 'Edad' podría ser números enteros entre 0 y 120."
            },
            {
                question: "¿Cuál de las siguientes afirmaciones sobre las tuplas en una relación es CIERTA?",
                options: [
                    "El orden de las tuplas es muy importante y está fijo.",
                    "Las tuplas en una relación no tienen un orden particular.",
                    "Una relación puede contener múltiples tuplas idénticas.",
                    "Todas las tuplas deben contener al menos un valor nulo."
                ],
                answer: 1,
                explanation: "Formalmente, una relación es un conjunto de tuplas, y en un conjunto, los elementos no tienen un orden específico. Por lo tanto, el orden de las filas no importa."
            },
            {
                question: "¿Qué es una 'superclave' (superkey)?",
                options: [
                    "Una clave que contiene todos los atributos de la tabla.",
                    "Un subconjunto de atributos que no puede identificar unívocamente una tupla.",
                    "Un conjunto de uno o más atributos que, en conjunto, permiten identificar unívocamente una tupla en una relación.",
                    "Una clave que siempre es un único atributo."
                ],
                answer: 2,
                explanation: "Una superclave es cualquier conjunto de atributos que identifica de forma única a una tupla. Puede contener atributos adicionales que no son estrictamente necesarios para la identificación única."
            },
            {
                question: "¿Qué es una 'clave candidata' (candidate key)?",
                options: [
                    "Cualquier atributo de la tabla.",
                    "Una superclave que no contiene atributos redundantes; es decir, es una superclave mínima.",
                    "Una clave que se propone pero aún no se ha aprobado.",
                    "El conjunto de todas las claves de una tabla."
                ],
                answer: 1,
                explanation: "Una clave candidata es una superclave mínima. Si se elimina cualquier atributo de una clave candidata, deja de ser una superclave. Una relación puede tener varias claves candidatas."
            },
            {
                question: "La 'clave primaria' (primary key) es:",
                options: [
                    "La clave candidata más larga.",
                    "La clave candidata que se elige para identificar unívocamente las tuplas dentro de la relación.",
                    "La única clave que puede tener valores nulos.",
                    "Una clave que no puede usarse para búsquedas."
                ],
                answer: 1,
                explanation: "De entre todas las claves candidatas, el diseñador de la base de datos elige una para que sea la clave primaria. Su propósito principal es ser el identificador único de cada registro."
            },
            {
                question: "La restricción de integridad de entidad establece que:",
                options: [
                    "Todos los atributos deben tener un valor.",
                    "Ningún atributo de una clave primaria puede tener un valor nulo.",
                    "Las claves foráneas siempre deben tener un valor.",
                    "La base de datos no puede estar vacía."
                ],
                answer: 1,
                explanation: "La integridad de entidad es una regla fundamental que garantiza que cada tupla tenga un identificador único y no nulo, al prohibir valores nulos en cualquier parte de la clave primaria."
            },
            {
                question: "¿Qué es una 'clave foránea' (foreign key)?",
                options: [
                    "Una clave primaria de otra tabla.",
                    "Un atributo o conjunto de atributos en una relación cuyos valores deben coincidir con la clave primaria de otra relación (o ser nulos).",
                    "Una clave que no está indexada y ralentiza las consultas.",
                    "Una copia de la clave primaria en la misma tabla."
                ],
                answer: 1,
                explanation: "Una clave foránea se utiliza para establecer y reforzar un vínculo entre los datos de dos tablas. Impone la restricción de integridad referencial."
            },
            {
                question: "La restricción de integridad referencial asegura que:",
                options: [
                    "No se puedan insertar tuplas duplicadas.",
                    "Un valor de una clave foránea debe tener una tupla correspondiente en la relación referenciada o ser nulo.",
                    "La clave primaria nunca pueda cambiar.",
                    "Todos los atributos de texto estén en mayúsculas."
                ],
                answer: 1,
                explanation: "Esta restricción mantiene la consistencia entre las tuplas de dos relaciones. Evita que existan registros 'huérfanos' (un registro que hace referencia a otro que ya no existe)."
            },
            {
                question: "¿Qué representa el 'esquema de una relación'?",
                options: [
                    "El conjunto de tuplas (datos) en un momento dado.",
                    "El nombre de la relación seguido de los nombres de sus atributos y sus dominios.",
                    "Una consulta para recuperar datos de la relación.",
                    "El número de filas que contiene la tabla."
                ],
                answer: 1,
                explanation: "El esquema (o intensión) define la estructura de la relación, incluyendo su nombre y sus atributos. Por ejemplo: CLIENTE(IdCliente, Nombre, Apellido)."
            },
            {
                question: "¿Qué es una 'instancia' o 'estado' de una relación?",
                options: [
                    "La estructura y los nombres de las columnas.",
                    "Una tabla específica en un momento dado, con su conjunto particular de tuplas (datos).",
                    "La clave primaria de la tabla.",
                    "Las reglas de integridad de la relación."
                ],
                answer: 1,
                explanation: "La instancia (o extensión) de una relación es el contenido de la tabla en un momento específico. Mientras el esquema es constante, la instancia cambia con el tiempo a medida que se insertan, modifican o eliminan tuplas."
            },
            {
                question: "¿Por qué los valores de los atributos en una relación deben ser atómicos?",
                options: [
                    "Porque es más fácil de programar.",
                    "Porque la primera forma normal (1FN) del modelo relacional lo exige; cada celda debe tener un solo valor.",
                    "Porque ahorra más espacio en disco.",
                    "Porque los valores no atómicos no pueden ser nulos."
                ],
                answer: 1,
                explanation: "La atomicidad de los valores es una propiedad fundamental del modelo relacional. Significa que cada atributo en una tupla debe tener un único valor indivisible, lo cual es la base de la Primera Forma Normal (1FN)."
            }
        ];

        let quizzes = [];
        let currentQuiz;
        let currentQuestionIndex = 0;
        let score = 0;

        const quizSelectionScreen = document.getElementById('quiz-selection-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const questionElement = document.getElementById('question');
        const optionsContainer = document.getElementById('options-container');
        const currentQuestionNumberElement = document.getElementById('current-question-number');
        const scoreElement = document.getElementById('score');
        const nextButton = document.getElementById('next-button');
        const feedbackMessage = document.getElementById('feedback-message');
        const finalScoreElement = document.getElementById('final-score');

        // Función para mezclar un array de forma aleatoria (algoritmo Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // Función para generar los 10 exámenes, cada uno con 15 preguntas aleatorias
        function generateQuizzes() {
            quizzes = [];
            for (let i = 0; i < 10; i++) {
                shuffleArray(allQuestions);
                const selectedQuestions = allQuestions.slice(0, 15);
                quizzes.push({
                    title: `Examen de Práctica ${i + 1}`,
                    questions: selectedQuestions
                });
            }
        }

        // Inicia un examen específico por su índice
        function startQuiz(quizIndex) {
            currentQuiz = quizzes[quizIndex];
            currentQuestionIndex = 0;
            score = 0;
            
            quizSelectionScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');

            showQuestion();
        }

        // Muestra la pregunta actual y sus opciones
        function showQuestion() {
            const currentQuestionData = currentQuiz.questions[currentQuestionIndex];

            currentQuestionNumberElement.textContent = currentQuestionIndex + 1;
            scoreElement.textContent = score;
            questionElement.textContent = currentQuestionData.question;
            optionsContainer.innerHTML = '';
            feedbackMessage.classList.add('hidden');
            feedbackMessage.innerHTML = '';
            nextButton.disabled = true;

            const options = [...currentQuestionData.options];
            
            options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('answer-button', 'block');
                button.onclick = () => checkAnswer(button, index);
                optionsContainer.appendChild(button);
            });
        }

        // Verifica la respuesta seleccionada
        function checkAnswer(selectedButton, selectedIndex) {
            const currentQuestionData = currentQuiz.questions[currentQuestionIndex];
            const correctIndex = currentQuestionData.answer;

            // Deshabilitar todos los botones de opciones para evitar cambios
            Array.from(optionsContainer.children).forEach((button) => {
                button.disabled = true;
            });
            
            // Marcar la respuesta correcta con verde
            optionsContainer.children[correctIndex].classList.add('correct');

            if (selectedIndex === correctIndex) {
                score++;
                feedbackMessage.textContent = '¡Respuesta Correcta!';
                feedbackMessage.classList.remove('hidden', 'bg-red-100', 'text-red-700');
                feedbackMessage.classList.add('bg-green-100', 'text-green-700');
            } else {
                // Marcar la respuesta incorrecta con rojo
                selectedButton.classList.add('incorrect');
                feedbackMessage.innerHTML = `
                    <div class="font-bold mb-2">¡Respuesta Incorrecta!</div>
                    <div class="explanation">
                        <strong class="text-indigo-700">Explicación:</strong>
                        <p class="text-sm mt-1 text-gray-700">${currentQuestionData.explanation}</p>
                    </div>
                `;
                feedbackMessage.classList.remove('hidden', 'bg-green-100', 'text-green-700');
                feedbackMessage.classList.add('bg-red-100', 'text-red-700');
            }

            feedbackMessage.classList.remove('hidden');
            scoreElement.textContent = score;
            nextButton.disabled = false;
            nextButton.focus();
        }

        // Pasa a la siguiente pregunta o finaliza el examen
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuiz.questions.length) {
                showQuestion();
            } else {
                endQuiz();
            }
        }

        // Muestra la pantalla de resultados finales
        function endQuiz() {
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            finalScoreElement.textContent = score;
        }

        // Vuelve a la pantalla de selección de cuestionarios
        function restartQuiz() {
            resultsScreen.classList.add('hidden');
            quizSelectionScreen.classList.remove('hidden');
            generateQuizzes(); // Regenerar los exámenes para que sean diferentes cada vez
        }

        // Inicializa la aplicación al cargar la página
        window.onload = function() {
            generateQuizzes();
            quizSelectionScreen.classList.remove('hidden');
        }
    </script>
</body>
</html>